<!DOCTYPE html>
<html lang="zh-HK">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>Wire Builder Challenge</title>
<style>
    body {
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        background-color: #2c3e50;
        color: white;
        text-align: center;
        padding: 10px;
        margin: 0;
    }
    .container {
        max-width: 500px;
        margin: 0 auto;
        background: #34495e;
        border-radius: 20px;
        padding: 20px;
        box-shadow: 0 10px 25px rgba(0,0,0,0.5);
    }
    h2 { color: #f1c40f; margin-top: 0; }
    
    .mission-box {
        background: #e67e22; color: white; padding: 10px; border-radius: 10px;
        margin-bottom: 20px; font-weight: bold; animation: popIn 0.5s;
    }
    
    /* é¡¯ç¤ºå€åŸŸ */
    .viewport {
        background: #ecf0f1; border-radius: 15px; height: 180px;
        position: relative; overflow: hidden; margin-bottom: 20px;
        border: 4px solid #bdc3c7;
        display: flex; align-items: center; justify-content: flex-start; /* å·¦å°é½Š */
        padding-left: 20px;
    }

    /* å°ç·š (å‹•æ…‹è®ŠåŒ–) */
    .wire {
        background: #95a5a6;
        border: 2px solid #7f8c8d;
        position: relative;
        transition: all 0.5s ease;
        overflow: hidden;
        /* é»˜èªå€¼ */
        width: 100px; height: 20px; 
    }
    
    /* é›»å­å‹•ç•« */
    .electron {
        width: 8px; height: 8px; background: #f1c40f; border-radius: 50%;
        position: absolute; top: 50%; transform: translateY(-50%);
        box-shadow: 0 0 5px #f1c40f;
        animation: moveRight linear infinite;
    }

    @keyframes moveRight {
        0% { left: -10px; opacity: 0; }
        10% { opacity: 1; }
        90% { opacity: 1; }
        100% { left: 100%; opacity: 0; }
    }

    /* æ§åˆ¶é¢æ¿ */
    .controls { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; }
    .control-group { background: rgba(0,0,0,0.2); padding: 10px; border-radius: 10px; }
    .control-label { font-size: 0.9rem; color: #bdc3c7; margin-bottom: 5px; display: block; }
    
    .btn-group { display: flex; gap: 5px; }
    .btn {
        flex: 1; padding: 10px; border: none; border-radius: 8px; cursor: pointer;
        font-weight: bold; font-size: 0.9rem; transition: 0.2s;
        background: #2c3e50; color: white; border: 2px solid #2c3e50;
    }
    .btn.active { background: #3498db; border-color: #3498db; }
    
    /* çµæœé¡¯ç¤º */
    .stats {
        display: flex; justify-content: space-around; margin-top: 20px;
        background: #22313f; padding: 10px; border-radius: 10px;
    }
    .stat-item { font-size: 0.9rem; }
    .stat-val { font-size: 1.2rem; font-weight: bold; color: #f1c40f; display: block; }

    /* ç‡ˆæ³¡ */
    .bulb {
        position: absolute; right: 20px; font-size: 50px; color: #444;
        transition: color 0.3s, text-shadow 0.3s;
    }

    @keyframes popIn { from { transform: scale(0.8); opacity: 0; } to { transform: scale(1); opacity: 1; } }

</style>
</head>
<body>

<div class="container">
    <h2>ğŸ› ï¸ Wire Builder (å°ç·šå»ºé€ å¸«)</h2>
    
    <div class="mission-box" id="mission-text">
        Mission 1: Make the bulb BRIGHTEST!<br>ä»»å‹™ 1ï¼šè®“ç‡ˆæ³¡è®Šå¾—æœ€äº®ï¼
    </div>

    <div class="viewport">
        <div style="font-size:30px; margin-right:10px;">ğŸ”‹</div>
        
        <div class="wire" id="wire-obj">
            </div>

        <div class="bulb" id="bulb-obj">ğŸ’¡</div>
    </div>

    <div class="controls">
        <div class="control-group">
            <span class="control-label">Length (é•·åº¦)</span>
            <div class="btn-group">
                <button class="btn active" onclick="setProp('len', 'short', this)">Short (çŸ­)</button>
                <button class="btn" onclick="setProp('len', 'long', this)">Long (é•·)</button>
            </div>
        </div>

        <div class="control-group">
            <span class="control-label">Thickness (ç²—å¹¼)</span>
            <div class="btn-group">
                <button class="btn" onclick="setProp('thick', 'thin', this)">Thin (å¹¼)</button>
                <button class="btn active" onclick="setProp('thick', 'thick', this)">Thick (ç²—)</button>
            </div>
        </div>
    </div>

    <div class="stats">
        <div class="stat-item">Resistance (é›»é˜»)<span class="stat-val" id="res-val">Low</span></div>
        <div class="stat-item">Current (é›»æµ)<span class="stat-val" id="curr-val">High</span></div>
    </div>

    <button onclick="checkMission()" style="width:100%; margin-top:20px; padding:15px; background:#27ae60; color:white; border:none; border-radius:10px; font-size:1.1rem; font-weight:bold; cursor:pointer;">Check Mission (æª¢æŸ¥ä»»å‹™)</button>
</div>

<script>
    // ç‹€æ…‹
    let currentLen = 'short';
    let currentThick = 'thick';
    let missionStage = 1;

    const wire = document.getElementById('wire-obj');
    const bulb = document.getElementById('bulb-obj');
    const resVal = document.getElementById('res-val');
    const currVal = document.getElementById('curr-val');
    const missionText = document.getElementById('mission-text');

    function setProp(type, val, btn) {
        // æ›´æ–°æŒ‰éˆ•æ¨£å¼
        const parent = btn.parentElement;
        Array.from(parent.children).forEach(b => b.classList.remove('active'));
        btn.classList.add('active');

        if (type === 'len') currentLen = val;
        if (type === 'thick') currentThick = val;

        updateWireVisuals();
    }

    function updateWireVisuals() {
        // 1. æ”¹è®Šå¹¾ä½•å½¢ç‹€
        // Length: Short=100px, Long=250px
        const width = currentLen === 'short' ? 100 : 250;
        // Thickness: Thin=10px, Thick=40px
        const height = currentThick === 'thin' ? 10 : 40;
        
        wire.style.width = width + 'px';
        wire.style.height = height + 'px';

        // 2. è¨ˆç®—ç‰©ç†é‡
        // Logic: 
        // Short + Thick = Lowest R (Best)
        // Long + Thin = Highest R (Worst)
        
        let rScore = 0;
        if (currentLen === 'long') rScore += 2;
        if (currentThick === 'thin') rScore += 2;
        // rScore: 0 (Best), 2 (Med), 4 (Worst)

        let rText = "Low";
        let cText = "High";
        let bulbBrightness = 1;
        let electronSpeed = 1;

        if (rScore === 0) { // Short Thick
            rText = "Very Low"; cText = "Max"; bulbBrightness = 1; electronSpeed = 0.8;
        } else if (rScore === 2) { // Mixed
            rText = "Medium"; cText = "Medium"; bulbBrightness = 0.5; electronSpeed = 1.5;
        } else { // Long Thin
            rText = "Very High"; cText = "Tiny"; bulbBrightness = 0.1; electronSpeed = 3; // Slow speed (duration high)
        }

        resVal.innerText = rText;
        currVal.innerText = cText;

        // 3. æ›´æ–°ç‡ˆæ³¡
        if (bulbBrightness > 0.8) {
            bulb.style.color = "#f1c40f"; bulb.style.textShadow = "0 0 30px #f1c40f";
        } else if (bulbBrightness > 0.4) {
            bulb.style.color = "#95a5a6"; bulb.style.textShadow = "0 0 10px #f1c40f";
        } else {
            bulb.style.color = "#333"; bulb.style.textShadow = "none";
        }

        // 4. æ›´æ–°é›»å­å‹•ç•« (æ•¸é‡èˆ‡é€Ÿåº¦)
        wire.innerHTML = ''; // æ¸…ç©º
        // Thick = å¤šé›»å­, Thin = å°‘é›»å­
        const electronCount = currentThick === 'thick' ? 8 : 2; 
        
        for(let i=0; i<electronCount; i++) {
            let e = document.createElement('div');
            e.className = 'electron';
            // éš¨æ©ŸéŒ¯é–‹ä½ç½®
            e.style.top = Math.random() * 80 + 10 + "%"; 
            e.style.animationDuration = electronSpeed + "s";
            e.style.animationDelay = Math.random() * electronSpeed + "s";
            wire.appendChild(e);
        }
    }

    function checkMission() {
        let success = false;
        let msg = "";

        if (missionStage === 1) {
            // Target: Brightest (Short + Thick)
            if (currentLen === 'short' && currentThick === 'thick') {
                success = true;
                msg = "Correct! Short & Thick wire has the LEAST resistance.<br>ç­”å°äº†ï¼çŸ­è€Œç²—çš„å°ç·šé›»é˜»æœ€å°ã€‚";
            } else {
                msg = "Try again! We need LESS resistance.<br>å†è©¦è©¦ï¼æˆ‘å€‘éœ€è¦æ¸›å°‘é›»é˜»ï¼ˆè·¯è¦çŸ­ã€è¦é—Šï¼‰ã€‚";
            }
        } else if (missionStage === 2) {
            // Target: Dimmest (Long + Thin)
            if (currentLen === 'long' && currentThick === 'thin') {
                success = true;
                msg = "Correct! Long & Thin wire has the HIGHEST resistance.<br>ç­”å°äº†ï¼é•·è€Œå¹¼çš„å°ç·šé›»é˜»æœ€å¤§ã€‚";
            } else {
                msg = "Try again! We need MORE resistance.<br>å†è©¦è©¦ï¼æˆ‘å€‘éœ€è¦å¢åŠ é›»é˜»ï¼ˆè·¯è¦é•·ã€è¦çª„ï¼‰ã€‚";
            }
        }

        if (success) {
            alert("ğŸ‰ " + msg.replace(/<br>/g, "\n"));
            if (missionStage === 1) {
                missionStage = 2;
                missionText.innerHTML = "Mission 2: Make the bulb DIMMEST!<br>ä»»å‹™ 2ï¼šè®“ç‡ˆæ³¡è®Šå¾—æœ€æš—ï¼";
                missionText.style.background = "#34495e"; // Change color
            } else {
                missionText.innerHTML = "ğŸ† You are a Wire Master!<br>ä½ å·²å®Œå…¨æŒæ¡å°ç·šç‰¹æ€§ï¼";
                missionText.style.background = "#27ae60";
            }
        } else {
            alert("âŒ " + msg.replace(/<br>/g, "\n"));
        }
    }

    // Init
    updateWireVisuals();

</script>
</body>
</html>