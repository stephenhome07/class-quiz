<!DOCTYPE html>
<html lang="zh-HK">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Connection Gym</title>
<style>
    /* åŸºç¤è¨­å®š */
    body { 
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; 
        background-color: #2c3e50; 
        color: white; 
        text-align: center; 
        padding: 10px; 
        margin: 0;
    }

    .container { 
        max-width: 400px; 
        margin: 20px auto; 
        background: white; 
        color: #333; 
        border-radius: 15px; 
        padding: 20px; 
        box-shadow: 0 10px 25px rgba(0,0,0,0.4); 
    }
    
    h2 { color: #e67e22; margin-top: 0; }
    
    .instruction { 
        font-size: 1.1rem; 
        margin-bottom: 15px; 
        min-height: 3.5em; 
        display: flex;
        align-items: center;
        justify-content: center;
        flex-direction: column;
    }
    
    .stage { 
        height: 220px; 
        background: #ecf0f1; 
        border-radius: 10px; 
        margin-bottom: 20px; 
        position: relative; 
        border: 3px dashed #bdc3c7; 
        display: flex; 
        align-items: center; 
        justify-content: center; 
        overflow: hidden;
    }

    .btn-group { display: flex; gap: 10px; }
    
    .btn { 
        flex: 1; 
        padding: 15px; 
        border: none; 
        border-radius: 10px; 
        font-size: 1rem; 
        font-weight: bold; 
        cursor: pointer; 
        color: white; 
        transition: transform 0.1s, opacity 0.2s;
        box-shadow: 0 4px 6px rgba(0,0,0,0.1);
    }
    
    .btn-series { background: #2980b9; } /* Blue */
    .btn-parallel { background: #e74c3c; } /* Red */
    .btn:active { transform: scale(0.95); }

    /* çµæœè¨Šæ¯æ¨£å¼ */
    .correct-msg { color: #27ae60; font-weight: bold; font-size: 1.2rem; }
    .wrong-msg { color: #c0392b; font-weight: bold; font-size: 1.2rem; }

    /* SVG æ¨£å¼ */
    svg { width: 100%; height: 100%; overflow: visible; }
    text { font-family: sans-serif; }

    /* ä¸‹ä¸€é—œæŒ‰éˆ• */
    #next-btn {
        background: #27ae60; 
        display: none; 
        width: 100%; 
        margin-top: 15px;
    }
</style>
</head>
<body>

<div class="container">
    <h2>âš¡ Connection Gym âš¡</h2>
    
    <div class="instruction" id="msg">
        <div>Round 1: <b style="color:#2980b9">Ammeter (A)</b></div>
        <div style="font-size: 0.9em; color:#555;">How should it connect?<br>(å®‰åŸ¹è¨ˆå¦‚ä½•é€£æ¥ï¼Ÿ)</div>
    </div>

    <div class="stage" id="stage">
        </div>

    <div class="btn-group" id="controls">
        <button class="btn btn-series" onclick="checkAnswer('series')">
            ğŸ¤ Series<br><small>æ‰‹æ‹‰æ‰‹</small>
        </button>
        <button class="btn btn-parallel" onclick="checkAnswer('parallel')">
            ğŸ¤— Parallel<br><small>æ“æŠ±/ä¸¦è¯</small>
        </button>
    </div>
    
    <button id="next-btn" class="btn" onclick="nextRound()">Next Round (ä¸‹ä¸€é—œ)</button>
</div>

<script>
    let currentRound = 'A'; // 'A' = Ammeter, 'V' = Voltmeter

    // ç¹ªåœ–å‡½æ•¸
    function drawCircuit(type, device) {
        // SVG é–‹é ­
        let svg = `<svg viewBox="0 0 200 120">`;
        
        // ç•«é›»æ±  (å·¦å´)
        svg += `<rect x="20" y="40" width="10" height="40" fill="#7f8c8d"/> <text x="10" y="35" font-size="14">-</text>`;
        svg += `<rect x="30" y="30" width="10" height="60" fill="#f39c12"/> <text x="45" y="35" font-size="14">+</text>`;
        
        // ç•«ç‡ˆæ³¡ (å³å´) - åœ“åœˆèˆ‡äº¤å‰
        svg += `<circle cx="160" cy="60" r="15" fill="none" stroke="black" stroke-width="2"/>`;
        svg += `<path d="M152,52 L168,68 M168,52 L152,68" stroke="black" stroke-width="2"/>`;

        // æ ¹æ“šä¸åŒç‹€æ…‹ç•«ç·šè·¯
        if (type === 'initial') {
            // åªæœ‰åº•éƒ¨é›»ç·š
            svg += `<path d="M40,60 L145,60" stroke="black" stroke-width="2"/>`;
            // é£„æµ®åœ¨ç©ºä¸­çš„å„€å™¨ (æç¤ºç”¨)
            let color = device === 'A' ? '#2980b9' : '#c0392b';
            svg += `<circle cx="100" cy="30" r="18" fill="white" stroke="${color}" stroke-width="3"/>`;
            svg += `<text x="100" y="36" text-anchor="middle" font-weight="bold" font-size="20" fill="${color}">${device}</text>`;
            svg += `<text x="100" y="105" text-anchor="middle" font-size="12" fill="#7f8c8d">Where should I go?</text>`;
        } 
        else if (type === 'series') {
            // ä¸²è¯ï¼šé›»ç·šæ–·é–‹ï¼Œå„€å™¨å¡ä¸­é–“
            svg += `<line x1="40" y1="60" x2="82" y2="60" stroke="black" stroke-width="2"/>`;
            
            let color = device === 'A' ? '#2980b9' : '#c0392b';
            svg += `<circle cx="100" cy="60" r="18" fill="white" stroke="${color}" stroke-width="3"/>`;
            svg += `<text x="100" y="66" text-anchor="middle" font-weight="bold" font-size="20" fill="${color}">${device}</text>`;
            
            svg += `<line x1="118" y1="60" x2="145" y2="60" stroke="black" stroke-width="2"/>`;
            
            if(device === 'A') {
                svg += `<text x="100" y="100" text-anchor="middle" font-size="14" fill="#2980b9" font-weight="bold">ğŸ¤ Holding Hands!</text>`;
            }
        } 
        else if (type === 'parallel') {
            // ä¸¦è¯ï¼šåŸé›»ç·šä¿ç•™ï¼Œå¦å¤–æ‹‰ç·šåŒ…åœ
            svg += `<line x1="40" y1="60" x2="145" y2="60" stroke="black" stroke-width="2"/>`; // åŸç·š
            
            // è·¨æ¥ç·š (ã„‡å­—å‹)
            svg += `<path d="M80,60 L80,95 L180,95 L180,60" fill="none" stroke="black" stroke-width="2"/>`;
            
            let color = device === 'A' ? '#2980b9' : '#c0392b';
            svg += `<circle cx="130" cy="95" r="18" fill="white" stroke="${color}" stroke-width="3"/>`;
            svg += `<text x="130" y="101" text-anchor="middle" font-weight="bold" font-size="20" fill="${color}">${device}</text>`;
            
            if(device === 'V') {
                svg += `<text x="80" y="115" text-anchor="middle" font-size="14" fill="#c0392b" font-weight="bold">ğŸ¤— Hugging!</text>`;
            }
        }

        svg += `</svg>`;
        return svg;
    }

    // åˆå§‹åŒ–
    function init() {
        document.getElementById('stage').innerHTML = drawCircuit('initial', 'A');
    }

    // æª¢æŸ¥ç­”æ¡ˆ
    function checkAnswer(choice) {
        const msg = document.getElementById('msg');
        const stage = document.getElementById('stage');
        const nextBtn = document.getElementById('next-btn');
        const controls = document.getElementById('controls');

        if (currentRound === 'A') {
            if (choice === 'series') {
                stage.innerHTML = drawCircuit('series', 'A');
                msg.innerHTML = "<div class='correct-msg'>âœ… Correct!</div><div>Ammeter holds hands (Series).<br>å®‰åŸ¹è¨ˆè¦ã€Œæ‰‹æ‹‰æ‰‹ã€ä¸²è¯ã€‚</div>";
                controls.style.display = 'none';
                nextBtn.style.display = 'block';
                // æˆåŠŸéœ‡å‹•
                if(navigator.vibrate) navigator.vibrate(50);
            } else {
                stage.innerHTML = drawCircuit('parallel', 'A');
                // ä¸¦è¯å®‰åŸ¹è¨ˆçŸ­è·¯ç‰¹æ•ˆ
                stage.innerHTML = stage.innerHTML.replace('</svg>', '<text x="100" y="50" text-anchor="middle" font-size="40">ğŸ’¥</text></svg>');
                msg.innerHTML = "<div class='wrong-msg'>âŒ Short Circuit!</div><div>It will burn!<br>å®‰åŸ¹è¨ˆä¸¦è¯æœƒçŸ­è·¯ç‡’å£ï¼</div>";
                // å¤±æ•—éœ‡å‹•
                if(navigator.vibrate) navigator.vibrate([100,50,100]);
            }
        } 
        else if (currentRound === 'V') {
             if (choice === 'parallel') {
                stage.innerHTML = drawCircuit('parallel', 'V');
                msg.innerHTML = "<div class='correct-msg'>âœ… Correct!</div><div>Voltmeter hugs (Parallel).<br>ä¼ç‰¹è¨ˆè¦ã€Œæ“æŠ±ã€ä¸¦è¯ã€‚</div>";
                controls.style.display = 'none';
                nextBtn.innerText = "Finish (å®Œæˆ)";
                nextBtn.style.display = 'block';
                if(navigator.vibrate) navigator.vibrate(50);
                nextBtn.onclick = function() { location.reload(); };
            } else {
                stage.innerHTML = drawCircuit('series', 'V');
                // ä¸²è¯ä¼ç‰¹è¨ˆæ–·è·¯
                msg.innerHTML = "<div class='wrong-msg'>âŒ Blocked!</div><div>Resistance is too high.<br>ä¼ç‰¹è¨ˆé›»é˜»å¤§ï¼Œä¸²è¯æœƒæ–·è·¯ã€‚</div>";
                if(navigator.vibrate) navigator.vibrate([100,50,100]);
            }
        }
    }

    // åˆ‡æ›åˆ°ä¸‹ä¸€é—œ
    function nextRound() {
        currentRound = 'V';
        const msg = document.getElementById('msg');
        msg.innerHTML = "<div>Round 2: <b style='color:#c0392b'>Voltmeter (V)</b></div><div style='font-size: 0.9em; color:#555;'>How should it connect?<br>(ä¼ç‰¹è¨ˆå¦‚ä½•é€£æ¥ï¼Ÿ)</div>";
        
        document.getElementById('stage').innerHTML = drawCircuit('initial', 'V');
        document.getElementById('controls').style.display = 'flex';
        document.getElementById('next-btn').style.display = 'none';
    }

    // å•Ÿå‹•
    window.onload = init;

</script>
</body>
</html>
