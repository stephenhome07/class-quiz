<!DOCTYPE html>
<html lang="zh-HK">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>Circuit Reflection Check</title>
<style>
    body {
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        background-color: #2c3e50;
        color: white;
        text-align: center;
        padding: 20px;
        margin: 0;
        -webkit-user-select: none;
        user-select: none;
    }

    .container {
        max-width: 600px;
        margin: 0 auto;
    }

    h2 { color: #f1c40f; margin-bottom: 5px; }
    .subtitle { color: #bdc3c7; font-size: 0.9rem; margin-bottom: 30px; }

    /* ä»»å‹™å¡ç‰‡æ¨£å¼ */
    .mission-card {
        background: #34495e;
        border-radius: 12px;
        padding: 20px;
        margin-bottom: 25px;
        border: 2px solid #5a6b7c;
        text-align: left;
        transition: transform 0.3s, border-color 0.3s;
        position: relative;
    }

    .mission-card.completed {
        border-color: #2ecc71;
        background: #273c49;
    }

    .mission-header {
        display: flex;
        align-items: center;
        margin-bottom: 15px;
        border-bottom: 1px solid rgba(255,255,255,0.1);
        padding-bottom: 10px;
    }

    /* è‡ªå®šç¾©å‹¾é¸æ¡† */
    .checkbox {
        width: 24px;
        height: 24px;
        border: 2px solid #bdc3c7;
        border-radius: 50%;
        margin-right: 15px;
        display: flex;
        align-items: center;
        justify-content: center;
        flex-shrink: 0;
        background: #2c3e50;
    }
    .mission-card.completed .checkbox {
        background: #2ecc71;
        border-color: #2ecc71;
        color: white;
    }
    .checkbox::after {
        content: 'âœ”';
        display: none;
        font-size: 16px;
    }
    .mission-card.completed .checkbox::after {
        display: block;
    }

    .mission-title { font-weight: bold; color: #ecf0f1; font-size: 1.1rem; }
    .mission-desc { font-size: 0.9rem; color: #bdc3c7; margin-top: 4px; }

    /* äº’å‹•å€åŸŸ */
    .interaction-area {
        background: #2c3e50;
        border-radius: 8px;
        padding: 15px;
        text-align: center;
        margin-top: 10px;
    }

    /* SVG é€šç”¨ */
    svg { width: 100%; max-width: 200px; height: auto; display: block; margin: 0 auto; overflow: visible; }
    .wire { fill: none; stroke: #7f8c8d; stroke-width: 4; stroke-linecap: round; }
    .wire-active { stroke: #f1c40f; filter: drop-shadow(0 0 5px orange); }
    .bulb-glass { fill: #555; stroke: #333; stroke-width: 2; transition: fill 0.3s; }
    .bulb-on { fill: #f1c40f; filter: drop-shadow(0 0 10px #f1c40f); }
    
    /* æŒ‰éˆ•æ¨£å¼ */
    .btn-group { display: flex; gap: 10px; justify-content: center; margin-top: 15px; }
    .btn {
        padding: 8px 16px; border: none; border-radius: 20px;
        font-weight: bold; cursor: pointer; transition: 0.2s;
        background: #95a5a6; color: white;
    }
    .btn:active { transform: scale(0.95); }
    .btn.correct { background: #2ecc71; }
    .btn.wrong { background: #e74c3c; animation: shake 0.4s; }

    @keyframes shake {
        0%, 100% { transform: translateX(0); }
        25% { transform: translateX(-5px); }
        75% { transform: translateX(5px); }
    }

    .feedback-msg {
        height: 20px; color: #f1c40f; font-size: 0.85rem; margin-top: 10px; font-weight: bold;
    }

</style>
</head>
<body>

<div class="container">
    <h2>ğŸ“ Reflection Check</h2>
    <p class="subtitle">Complete the tasks to tick the boxes.<br>å®Œæˆä»»å‹™ä»¥å‹¾é¸åæ€é …ç›®ã€‚</p>

    <div class="mission-card" id="card-1">
        <div class="mission-header">
            <div class="checkbox"></div>
            <div>
                <div class="mission-title">1. Identification (è¾¨è­˜)</div>
                <div class="mission-desc">I can distinguish between Series and Parallel.<br>æˆ‘èƒ½åˆ†è¾¨ä¸²è¯å’Œä¸¦è¯ã€‚</div>
            </div>
        </div>
        <div class="interaction-area">
            <p style="font-size:0.9rem; color:#bdc3c7; margin-bottom:10px;">Quiz: What is this connection?<br>å•ï¼šé€™æ˜¯ä»€éº¼é€£æ¥ï¼Ÿ</p>
            <svg viewBox="0 0 160 100">
                <path d="M 10 90 L 10 10 L 150 10 L 150 90" class="wire" />
                <path d="M 50 10 L 50 90" class="wire" /> <path d="M 110 10 L 110 90" class="wire" /> <circle cx="50" cy="50" r="10" class="bulb-glass" fill="#555" />
                <circle cx="110" cy="50" r="10" class="bulb-glass" fill="#555" />
                
                <text x="80" y="100" fill="#7f8c8d" font-size="10" text-anchor="middle">Battery here</text>
            </svg>
            <div class="btn-group">
                <button class="btn" onclick="checkAns(1, 'series', this)">Series (ä¸²è¯)</button>
                <button class="btn" onclick="checkAns(1, 'parallel', this)">Parallel (ä¸¦è¯)</button>
            </div>
            <div class="feedback-msg" id="msg-1"></div>
        </div>
    </div>

    <div class="mission-card" id="card-2">
        <div class="mission-header">
            <div class="checkbox"></div>
            <div>
                <div class="mission-title">2. Real Life (ç”Ÿæ´»æ‡‰ç”¨)</div>
                <div class="mission-desc">Household lights are Parallel (Independent control).<br>å®¶è£¡çš„é›»ç‡ˆæ˜¯ä¸¦è¯çš„ï¼ˆå¯ç¨ç«‹é–‹é—œï¼‰ã€‚</div>
            </div>
        </div>
        <div class="interaction-area">
            <p style="font-size:0.9rem; color:#bdc3c7; margin-bottom:10px;">
                Task: Turn ON the <b>Bedroom</b> light ONLY.<br>ä»»å‹™ï¼š<b>åª</b>é–‹å•Ÿè‡¥å®¤ç‡ˆã€‚
            </p>
            <svg viewBox="0 0 200 100">
                <path d="M 10 50 L 50 50" class="wire" class="wire-active"/>
                
                <path d="M 50 50 L 50 20 L 100 20" class="wire" id="wire-r1" />
                <circle cx="120" cy="20" r="12" class="bulb-glass" id="bulb-r1" />
                <text x="120" y="45" fill="#bdc3c7" font-size="10" text-anchor="middle">Living Room</text>
                
                <path d="M 50 50 L 50 80 L 100 80" class="wire" id="wire-r2" />
                <circle cx="120" cy="80" r="12" class="bulb-glass" id="bulb-r2" />
                <text x="120" y="105" fill="#bdc3c7" font-size="10" text-anchor="middle">Bedroom</text>

                <g onclick="toggleRealLife(1)" style="cursor:pointer">
                    <rect x="70" y="10" width="20" height="20" fill="transparent" />
                    <line x1="70" y1="20" x2="90" y2="10" stroke="white" stroke-width="2" id="sw-r1"/>
                </g>
                <g onclick="toggleRealLife(2)" style="cursor:pointer">
                    <rect x="70" y="70" width="20" height="20" fill="transparent" />
                    <line x1="70" y1="80" x2="90" y2="70" stroke="white" stroke-width="2" id="sw-r2"/>
                </g>
            </svg>
            <div class="feedback-msg" id="msg-2">Click switches above (é»æ“Šé–‹é—œ)</div>
        </div>
    </div>

    <div class="mission-card" id="card-3">
        <div class="mission-header">
            <div class="checkbox"></div>
            <div>
                <div class="mission-title">3. Logic (é‚è¼¯)</div>
                <div class="mission-desc">If one bulb breaks in Series, ALL go out.<br>ä¸²è¯ä¸­å£äº†ä¸€å€‹ç‡ˆæ³¡ï¼Œå…¨éƒ¨ç†„æ»…ã€‚</div>
            </div>
        </div>
        <div class="interaction-area">
            <p style="font-size:0.9rem; color:#bdc3c7; margin-bottom:10px;">
                Prediction: If <b>Bulb A</b> breaks, what happens to <b>Bulb B</b>?<br>é æ¸¬ï¼šå¦‚æœç‡ˆæ³¡ A å£äº†ï¼Œç‡ˆæ³¡ B æœƒ...ï¼Ÿ
            </p>
            <svg viewBox="0 0 200 60">
                <line x1="10" y1="30" x2="190" y2="30" class="wire" id="wire-l1" style="stroke:#f1c40f;" />
                
                <g transform="translate(60,30)" id="grp-la">
                    <circle cx="0" cy="0" r="12" class="bulb-glass bulb-on" id="bulb-la" />
                    <text x="0" y="25" fill="#bdc3c7" font-size="10" text-anchor="middle">A</text>
                    <path d="M -8 -8 L 8 8 M 8 -8 L -8 8" stroke="#c0392b" stroke-width="3" style="display:none" id="x-la"/>
                </g>

                <g transform="translate(140,30)">
                    <circle cx="0" cy="0" r="12" class="bulb-glass bulb-on" id="bulb-lb" />
                    <text x="0" y="25" fill="#bdc3c7" font-size="10" text-anchor="middle">B</text>
                </g>
            </svg>
            <div class="btn-group">
                <button class="btn" onclick="checkLogic(true, this)">Stays ON (äº®è‘—)</button>
                <button class="btn" onclick="checkLogic(false, this)">Goes OFF (ç†„æ»…)</button>
            </div>
            <div class="feedback-msg" id="msg-3"></div>
        </div>
    </div>

</div>

<script>
    // Mission 1: Identification
    function checkAns(id, ans, btn) {
        const correct = 'parallel';
        const msg = document.getElementById('msg-1');
        const card = document.getElementById('card-1');

        if (ans === correct) {
            btn.classList.add('correct');
            msg.innerText = "Correct! Multiple paths = Parallel.";
            card.classList.add('completed');
            disableBtns(btn);
        } else {
            btn.classList.add('wrong');
            msg.innerText = "Try again! Look at the paths.";
            setTimeout(() => btn.classList.remove('wrong'), 500);
        }
    }

    // Mission 2: Real Life
    let sw1 = false;
    let sw2 = false;
    function toggleRealLife(id) {
        if(id === 1) sw1 = !sw1;
        if(id === 2) sw2 = !sw2;

        // Visuals
        document.getElementById('sw-r1').setAttribute('y2', sw1 ? 20 : 10);
        document.getElementById('sw-r2').setAttribute('y2', sw2 ? 80 : 70);
        
        const b1 = document.getElementById('bulb-r1');
        const b2 = document.getElementById('bulb-r2');
        
        // Parallel Logic
        if(sw1) b1.classList.add('bulb-on'); else b1.classList.remove('bulb-on');
        if(sw2) b2.classList.add('bulb-on'); else b2.classList.remove('bulb-on');

        const msg = document.getElementById('msg-2');
        const card = document.getElementById('card-2');

        // Target: Bedroom (2) ON, Living (1) OFF
        if(!sw1 && sw2) {
            msg.innerText = "Success! Independent control.";
            msg.style.color = "#2ecc71";
            card.classList.add('completed');
        } else if (sw1 && sw2) {
            msg.innerText = "Both are on. Try turning off Living Room.";
            msg.style.color = "#f1c40f";
        } else {
            msg.innerText = "Bedroom light is OFF.";
            msg.style.color = "#f1c40f";
        }
    }

    // Mission 3: Logic
    function checkLogic(predictStayOn, btn) {
        const msg = document.getElementById('msg-3');
        const card = document.getElementById('card-3');
        
        // Logic: Series, if A breaks, B goes OFF.
        // Correct answer is "Goes OFF" (predictStayOn == false)

        if (!predictStayOn) {
            // Correct
            btn.classList.add('correct');
            msg.innerText = "Correct! One path blocked = All stop.";
            card.classList.add('completed');
            
            // Show Animation
            document.getElementById('x-la').style.display = 'block'; // Break A
            document.getElementById('bulb-la').classList.remove('bulb-on');
            document.getElementById('bulb-lb').classList.remove('bulb-on'); // B goes off
            document.getElementById('wire-l1').style.stroke = '#7f8c8d'; // Wire dies

            disableBtns(btn);
        } else {
            // Wrong
            btn.classList.add('wrong');
            msg.innerText = "Think again! Is there another path?";
            setTimeout(() => btn.classList.remove('wrong'), 500);
        }
    }

    function disableBtns(activeBtn) {
        const parent = activeBtn.parentElement;
        const btns = parent.getElementsByClassName('btn');
        for(let b of btns) {
            if(b !== activeBtn) b.style.opacity = 0.5;
            b.onclick = null;
        }
    }

</script>
</body>
</html>